# kali-pack
Terraform Packer template for creating Kali Linux Amazon MAchine Image (AMI) in AWS

## Creating an AWS EC2 Instance with Packer and Terraform

This guide explains how to use Packer and Terraform to create an Amazon Machine Image (AMI) and launch an EC2 instance on AWS.

### Prerequisites

- [Terraform](https://www.terraform.io/downloads.html) installed
- [Packer](https://www.packer.io/downloads) installed
- AWS credentials configured (via environment variables or AWS CLI)

### Step 1: Prepare Your Working Directory

Create a directory for your Packer and Terraform files and navigate to it in your terminal.

### Step 2: Save Your Configuration

Save the Terraform Packer configuration JSON code in a file, e.g., `packer-ami.json`.

### Step 3: Build the AMI with Packer

Use the following command to create an AMI based on your Packer configuration file:

```bash
packer build packer-ami.json
```
Note the AMI ID generated by Packer.

### Step 4: Create an EC2 Instance with Terraform

Create a new Terraform configuration file (e.g., terraform-instance.tf) to launch an EC2 instance using the AMI ID:

```
provider "aws" {
  region = "us-east-1"  # Set your desired AWS region
}

resource "aws_instance" "example" {
  ami           = "YOUR_AMI_ID"  # Replace with the actual AMI ID
  instance_type = "t3.2xlarge"   # Choose an instance type
}
```
Replace "YOUR_AMI_ID" with the AMI ID generated by Packer.

### Step 5: Initialize and Apply the Terraform Configuration
Run the following commands to initialize Terraform and create the EC2 instance:
```
terraform init
terraform apply
```
Confirm the changes when prompted.

### Step 6: Access the EC2 Instance
After Terraform completes provisioning, access the EC2 instance using SSH with the private key corresponding to the SSH key pair used in the Packer configuration:
```
ssh -i /path/to/your/ssh/private/key.pem kali@INSTANCE_IP
```
Replace /path/to/your/ssh/private/key.pem with the path to your private key and INSTANCE_IP with the actual public IP or DNS name of the EC2 instance.